<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="x-ua-compatible" content="IE=edge,chrome=1"><meta name="description" content="Official documentation for QuadSpinner Gaea. Includes tutorials and knowledge base."><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"><meta name="generator" content="AngryMonkey 2.1"><title>Create a Bridge - Gaea Documentation - QuadSpinner</title><script src="/javascript/library/detect.min.js"></script><script src="/javascript/library/jquery.min.js"></script><script src="/javascript/library/easing.min.js"></script><script src="/javascript/library/highlight.min.js"></script><script src="/javascript/library/underscore.min.js"></script><script src="/dist/semantic.min.js"></script><link rel="stylesheet" type="text/css" class="ui" href="/dist/semantic.min.css"><link rel="stylesheet" type="text/css" href="/stylesheets/docs.css"><link rel="stylesheet" type="text/css" href="/stylesheets/monkey.min.css"><link rel="stylesheet" type="text/css" href="/stylesheets/iconfont/tabler-icons.min.css"></head><body id="main" class="started" ontouchstart="" data-hive="User Guide" data-title="Create a Bridge" data-hivehref="Guide" data-parent="Developers" data-parenthref="Developers"><!-- mobile menu --><div class="ui vertical inverted sidebar menu" id="toc"><div class="item"><a class="ui logo icon image" href="/"> <img src="/images/logo.png"> </a> <a href="/"><b>UI Docs</b></a></div></div><div class="ui black big launch right attached fixed button"><i class="content icon"></i> <span class="text">Menu</span></div><!-- / mobile menu --> <!-- mobile breadcrumb title --><div class="ui fixed inverted main menu"><div class="ui container"><a class="launch icon item"> <i class="content icon"></i> </a><div class="item">Create a Bridge</div></div></div><!-- / mobile breadcrumb title --><div class="pusher"><div class="full height"><div class="toc"><div class="ui vertical inverted menu scroll-toc" id="main-nav"></div></div><div class="article"><div class="ui masthead vertical segment"><div class="ui container"><div class="introduction"><h1 class="ui header">Create a Bridge</h1><div class="ui hidden divider"></div><div class="ui breadcrumb crumbs"></div><div class="ui right rail"><button class="ui toggle button"> <i class="ti ti-droplet-filled x3"></i> </button></div></div></div></div><div class="main ui intro container"><h2 id="a-bridge-between-gaea-and-your-application">A Bridge between Gaea and your application</h2><p>Gaea can be used as a silent processor from other applications from the command line.</p><blockquote class="WARNING"><p>The end-user must have a Professional or Enterprise edition of Gaea.</p></blockquote><h3 id="core-concept">Core Concept</h3><p>The Bridge can be created using any programming language, as long as you meet the following requirements:</p><ul><li>Invoke command lines and wait for process to exit</li><li>Read XML file</li><li>Save as PNG (16-bit), raw 32-bit floats, TIFF (32-bit), or OpenEXR (32-bit)</li><li>Redirect and read StdOut stream (optional)</li></ul><p><img src="/images/seq/bridge.webp" class="ui image medium" alt=""></p><p>Gaea must be installed along with prerequisites (see <a href="/Guide/Getting-Started/Installing-Gaea.html">Installing Gaea</a>) for the process to work.</p><p>The Gaea Bridge workflow consists of the following steps:</p><ol><li>App invokes <code>--nodemap</code> to get an XML map of available settings in the recipe file.</li><li>App configures its UI according to the XML map.</li><li>App saves the input heightfield(s) as files.</li><li>App invokes <code>Gaea.Build.exe</code> while passing automation variable values as arguments including input and output paths.</li><li>App optionally redirects StdOut stream to read and display status messages.</li><li>When the process exits, App will read the files saved by Gaea in the output path.</li></ol><p>To create a recipe file, follow the instructions in <a href="/Guide/Bridges/Preparing.html">Preparing TOR files</a>.</p><blockquote class="NOTE"><p>In the future, file based data transfer will be replaced with shared memory buffers for faster data transmission. At that point, you will be able to send and receive data directly as arrays of 32-bit floats.</p></blockquote><h2 id="configuring-the-interface">Configuring the Interface</h2><p>Gaea provides the facility to create an XML mapping file containing the details of all the variables exposed, their type, variable name, friendly name, value limits, and default value.</p><p>To produce this XML map, pass the <code>--nodemap</code> switch. The <code>.xml</code> node map file will be created in the same folder as the <code>.tor</code> file being passed to <code>Gaea.Build.exe</code>.</p><pre><code class="language-vb">Gaea.Build.exe &quot;C:\Gaea\erosion_automata.tor&quot; --nodemap
</code></pre><p>Here is an example of such a node map.</p><pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;Exposed&gt;
    &lt;Parameter Name=&quot;File&quot; 
               Type=&quot;in&quot; 
               Variable=&quot;fileInput&quot; 
               Default=&quot;&quot; /&gt;

    &lt;Parameter Name=&quot;Output&quot; 
               Type=&quot;out&quot; 
               Variable=&quot;fileOutput&quot; 
               Default=&quot;&quot; /&gt;

    &lt;Parameter Name=&quot;Duration&quot; 
               Type=&quot;double&quot; 
               Variable=&quot;duration&quot; 
               Min=&quot;0.001&quot; 
               Max=&quot;1&quot; 
               Default=&quot;0.15&quot; /&gt;

    &lt;Parameter Name=&quot;Fine Detail&quot; 
               Type=&quot;bool&quot; 
               Variable=&quot;finedetail&quot; 
               Default=&quot;True&quot; /&gt;

    &lt;Parameter Name=&quot;Verticality&quot; 
               Type=&quot;int&quot; 
               Variable=&quot;verticality&quot; 
               Min=&quot;50&quot; 
               Max=&quot;20000&quot; 
               Default=&quot;3200&quot; /&gt;
&lt;/Exposed&gt;

</code></pre><p>Your application should use the XML map to configure the UI for the bridge and present those options to the user.</p><table class="ui table"><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>Name</td><td>User-facing name of this setting. This can be used to construct the settings UI on your end.</td></tr><tr><td>Type</td><td>Data type. The options are <code>int</code>, <code>double</code>, <code>bool</code>, <code>choice</code>, <code>in</code>, and <code>out</code>. The last two are of <code>string</code> type, and used for specifying input and output paths.</td></tr><tr><td>Variable</td><td>The name of variable to be used in the command line when passing values.</td></tr><tr><td>Choices</td><td>Comma separated list of choices for <code>choice</code> type. This is used for creating dropdown lists with choices.</td></tr><tr><td>Min</td><td>The minimum accepted value for this setting. Only available for <code>int</code>, <code>double</code>, and <code>choice</code>.</td></tr><tr><td>Max</td><td>The maximum accepted value for this setting. Only available for <code>int</code>, <code>double</code>, and <code>choice</code>.</td></tr><tr><td>Default</td><td>The default value for this setting. Useful for resetting controls.</td></tr></tbody></table><h2 id="invoking-gaeabuildexe">Invoking Gaea.Build.exe</h2><p>When you wish to process the heightfield, save it to one of the formats specified above. Also decide on where you want Gaea to save the output so you can read from those files once finished.</p><p>Once the files are saved and the paths are prepared, create a command line string you can pass as arguments.</p><p>To modify any variables, use the following command line format: <code>variablename:value</code>. All variables must be appended to the command line after any switches such as <code>--open</code> or <code>--savetor</code>.</p><p>Here is a full command line example for the above nodemap:</p><pre><code class="language-vb">Gaea.Build.exe &quot;C:\erosion_automata.tor&quot; --automata --resolution0512 
 fileInput:&quot;Z:\input.webp&quot; fileOutput:&quot;Z:\output.webp&quot; 
 duration:0.518 finedetail:true verticality:2000
</code></pre><p>Unless using specific fixed workflows, it is recommended that the <code>--resolutionXXXX</code> argument be passed so Gaea forces the build at the desired resolution. See <a href="/Guide/Build/Swarm.html">Build Swarm</a> for the complete list of accepted command line arguments and switches.</p><h2 id="reading-stdout">Reading StdOut</h2><p>When Gaea.Build.exe is executed, you can redirect its Standard Output to read status messages during the build process. You can use these messages to display progress or messages to your end-user.</p><p>Sample messages:</p><ul><li><code>Property [name] set to [value].</code></li><li><code>Invalid value for property [name].</code></li><li><code>Property [name] not found.</code></li><li><code>Building [current] / [total]...</code></li><li><code>&gt; Building [node] / [percent]...</code></li></ul><p>When a single node requires a long time to build, the progress of that node will be sent with the <code>&gt;</code> prefix. You can use this to either hide such messages from your end users, or use it display a specific progress message.</p><p>Each individual message will be delimited by a line break character. In most environments, this will be <code>\u005C\u006E</code>.</p><h2 id="maintain-scale">Maintain Scale</h2><p>To ensure both input and output data retains the same level of fidelity, we strongly encourage using a 32-bit format for heightmaps.</p><p>See <a href="/Guide/Concepts/Scale.html">Terrain Scale</a> for details on how Gaea handles scale.</p><h3 id="raw-data">Raw Data</h3><p>In most cases, you will want to use Raw Data which is the default option in the <a href="/Guide/Interface/Build-Manager.html">Build Manager</a>. This will bring the data within the <code>0..1</code> as exported from your application. The scale will be maintained through Gaea's processing and the output will preserve this range. Any <a href="/Reference/Primitives/File.html">File</a> nodes used should NOT use the <code>Use Full Range</code> option otherwise incoming data would become normalized.</p><h3 id="normalized-data">Normalized Data</h3><p>If you prefer to receive normalized data, select the Normalized option in the <a href="/Guide/Interface/Build-Manager.html">Build Manager</a>. Any <a href="/Reference/Primitives/File.html">File</a> node should also use the <code>Use Full Range</code> option to normalize the incoming data unless the data is already normalized.</p><p>When you receive the data in your application after the build, you must process it as appropriate.</p><h3 id="mapped-data">Mapped Data</h3><p>If you wish to send and receive data (heightfields and masks only) in a specific range, you can choose to use a Custom Range. This can be specified explicitly in <a href="/Guide/Build/Manager.html">Build Manager</a> or can be passed on-the-fly via the command line.</p><p>To use a range of <code>-1000..1000</code>, you would supply the following arguments:</p><p><code class="val">--range-min:-1000 --range-max:1000</code></p><h2 id="locating-gaea">Locating Gaea</h2><p>To initiate a command line build, you must first find the location of Gaea's installation.</p><p>Query the following registry key for Gaea installation and configuration details:</p><p><code class="val">HKEY_CURRENT_USER\SOFTWARE\QuadSpinner\Gaea\1.0</code></p><table class="ui table"><thead><tr><th>Value</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td>(Default)</td><td>Installation Location</td><td><code class="val">C:\Program Files\QuadSpinner\Gaea\</code></td></tr><tr><td>Version</td><td>Installed Version</td><td><code class="val">1.2.0.0</code></td></tr></tbody></table></div><div class="ui vertical footer segment"><div class="ui center aligned container"><div class="ui horizontal small divided link list"><a class="item" href="http://semantic-ui.mit-license.org/" target="_blank"> Free & Open Source (MIT) </a></div></div></div></div></div></div><script src="/assets/js/main.js"></script><script src="/javascript/docs.js"></script></body></html>